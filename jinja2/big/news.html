{% set page_name = "big:news" %}
{% extends "big/base.html" %}
{% block title %}{{ _("最新动态") }} - {% endblock %}
{% block main %}
<div class="container">
	<div class="row">
		<div class="col">
			{% for post in posts %}
			<div class="mt-5">
				<h4 class="mt-0 row">
					<div class="col-12 col-md-10">
						<a href="{{ url('big:post', kwargs={'slug': post.slug}) }}" class="link-success text-decoration-none">
							{{ post.title }}
						</a>
					</div>
					<div class="col-12 mt-3 mt-md-0 col-md-2 text-muted text-md-right post-meta">
						{% if lang %}
						{{ time_format(post.created, 'Y-m-d') }}
						{% else %}
						{{ time_format(post.created, 'M j, Y') }}
						{% endif %}
					</div>
				</h4>
				{% if post.banner %}
				<div class="mt-4 animate-hover text-center">
					<a href="{{ url('big:post', kwargs={'slug': post.slug}) }}">
						<img class="mb-3 img-fluid" src="{{ post.banner.url }}">
					</a>
				</div>
				{% elif post.thumbnail %}
				<div class="mt-4 animate-hover text-center">
					<a href="{{ url('big:post', kwargs={'slug': post.slug}) }}">
						<img class="mb-3 img-fluid" src="{{ post.thumbnail.url }}">
					</a>
				</div>
				{% endif %}
				<div class="mt-4 lh-lg">
					{{ post.content | striptags | truncate(500) }}
				</div>
				<div class="text-end mt-4">
					<a href="{{ url('big:post', kwargs={'slug': post.slug}) }}" class="btn btn-sm btn-outline-success">{{ _("阅读更多") }}</a>
				</div>
			</div>
			{% endfor %}
		</div>
	</div>

	<div class="row">
		<div class="col">
			{% if posts.paginator.num_pages > 1 %}
			<div aria-label="Page navigation">
				<ul class="pagination justify-content-center">
					{% if posts.has_previous() %}
					<li class="page-item">
						<a href="?page={{ posts.previous_page_number }}" class="page-link link-success">{{ _("上一页") }}</a>
					</li>
					{% else %}
					<li class="page-item disabled">
						<a href="#" class="page-link" tabindex="-1" aria-disabled="true">{{ _("上一页") }}</a>
					</li>
					{% endif %}
					<li class="page-item disabled">
						<a href="#" class="page-link" tabindex="-1" aria-disabled="true">{{ posts.number }}</a>
					</li>
					{% if posts.has_next() %}
					<li class="page-item">
						<a href="?page={{ posts.next_page_number }}" class="page-link link-success">{{ _("下一页") }}</a>
					</li>
					{% else %}
					<li class="page-item disabled">
						<a href="#" class="page-link" tabindex="-1" aria-disabled="true">{{ _("下一页") }}</a>
					</li>
					{% endif %}
				</ul>
			</div>
			{% endif %}
		</div>
	</div>
</div>
{% endblock %}